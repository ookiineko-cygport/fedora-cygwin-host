echo 'Running pre-install script'

echo 'Changing DNF mirror'

sed -e 's|^metalink=|#metalink=|g' \
    -e 's|^#baseurl=http://download.example/pub/fedora/linux|baseurl=https://mirrors.ustc.edu.cn/fedora|g' \
    -i.bak \
    /etc/yum.repos.d/fedora.repo \
    /etc/yum.repos.d/fedora-modular.repo \
    /etc/yum.repos.d/fedora-updates.repo \
    /etc/yum.repos.d/fedora-updates-modular.repo

echo 'Setting DNF proxy'
echo 'proxy=http://10.0.0.209:56252' >> /etc/dnf/dnf.conf
